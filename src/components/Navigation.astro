---
const currentPath = Astro.url.pathname;
const isHomePage = currentPath === "/" || currentPath === "";
const isProjectsPage =
  currentPath === "/projects" || currentPath.startsWith("/projects");

const commonLinkClasses =
  "p-2 rounded-full hover:bg-white/10 transition-colors";
const activeContainerClasses =
  "flex items-center space-x-3 rounded-full pl-3 pr-4 py-1 bg-white/10";
const activeTextClasses = "text-white font-medium";
const activeIconClasses = "w-5 h-5 text-white";
const inactiveIconClasses = "w-5 h-5 text-gray-400";

const flowerIcon = `
  <svg class="${isHomePage ? activeIconClasses : inactiveIconClasses}" viewBox="0 0 512 512" fill="currentColor">
    <circle cx="256" cy="256" r="48"/>
    <path d="M475.93,303.91a67.49,67.49,0,0,0-44.34-115.53,5.2,5.2,0,0,1-4.58-3.21h0a5.21,5.21,0,0,1,1-5.51A67.83,67.83,0,0,0,378,66.33h-.25A67.13,67.13,0,0,0,332.35,84a5.21,5.21,0,0,1-5.52,1h0a5.23,5.23,0,0,1-3.22-4.58,67.68,67.68,0,0,0-135.23,0A5.2,5.2,0,0,1,185.17,85h0a5.21,5.21,0,0,1-5.52-1,67.11,67.11,0,0,0-45.44-17.69H134A67.91,67.91,0,0,0,84,179.65a5.21,5.21,0,0,1,1,5.51h0a5.2,5.2,0,0,1-4.58,3.21,67.71,67.71,0,0,0,0,135.23A5.23,5.23,0,0,1,85,326.83h0a5.22,5.22,0,0,1-1,5.52,67.54,67.54,0,0,0,50.08,113h.25A67.38,67.38,0,0,0,179.65,428a5.21,5.21,0,0,1,5.51-1h0a5.2,5.2,0,0,1,3.21,4.58,67.71,67.71,0,0,0,135.23,0,5.23,5.23,0,0,1,3.22-4.58h0a5.21,5.21,0,0,1,5.51,1,67.38,67.38,0,0,0,45.29,17.42h.25a67.48,67.48,0,0,0,50.08-113,5.22,5.22,0,0,1-1-5.52h0a5.23,5.23,0,0,1,4.58-3.22A67.31,67.31,0,0,0,475.93,303.91ZM256,336a80,80,0,1,1,80-80A80.09,80.09,0,0,1,256,336Z"/>
  </svg>
`;

const flaskIcon = `
  <svg class="${!isHomePage ? activeIconClasses : inactiveIconClasses}" viewBox="0 0 512 512" fill="currentColor">
    <path d="M452.32,365,327.4,167.12A48.07,48.07,0,0,1,320,141.48V64h15.56c8.61,0,16-6.62,16.43-15.23A16,16,0,0,0,336,32H176.45c-8.61,0-16,6.62-16.43,15.23A16,16,0,0,0,176,64h16v77.48a47.92,47.92,0,0,1-7.41,25.63L59.68,365a74,74,0,0,0-2.5,75.84C70.44,465.19,96.36,480,124.13,480H387.87c27.77,0,53.69-14.81,66.95-39.21A74,74,0,0,0,452.32,365ZM211.66,184.2A79.94,79.94,0,0,0,224,141.48V68a4,4,0,0,1,4-4h56a4,4,0,0,1,4,4v73.48a79.94,79.94,0,0,0,12.35,42.72l57.8,91.53A8,8,0,0,1,351.37,288H160.63a8,8,0,0,1-6.77-12.27Z"/>
  </svg>
`;
---

<nav class="fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50">
  <div class="liquidGlass-wrapper nav-glass p-2">
    <div class="liquidGlass-effect"></div>
    <div class="liquidGlass-tint"></div>
    <div class="liquidGlass-shine"></div>
    <div class="liquidGlass-content flex items-center space-x-4">
      {
        isHomePage ? (
          <>
            <div class={activeContainerClasses}>
              <Fragment set:html={flowerIcon} />
              <span class={activeTextClasses}>Sobre mí</span>
            </div>
            <a
              href="/projects"
              class={commonLinkClasses}
              aria-label="Ver proyectos"
            >
              <Fragment set:html={flaskIcon} />
            </a>
          </>
        ) : (
          <>
            <a href="/" class={commonLinkClasses} aria-label="Sobre mí">
              <Fragment set:html={flowerIcon} />
            </a>
            <div class={activeContainerClasses}>
              <Fragment set:html={flaskIcon} />
              <span class={activeTextClasses}>Proyectos</span>
            </div>
          </>
        )
      }
    </div>
  </div>
</nav>

<svg style="display: none">
  <filter
    id="glass-distortion"
    x="0%"
    y="0%"
    width="100%"
    height="100%"
    filterUnits="objectBoundingBox"
  >
    <feTurbulence
      type="fractalNoise"
      baseFrequency="0.01 0.01"
      numOctaves="1"
      seed="5"
      result="turbulence"></feTurbulence>
    <feGaussianBlur in="turbulence" stdDeviation="3" result="softMap"
    ></feGaussianBlur>
    <feDisplacementMap
      in="SourceGraphic"
      in2="softMap"
      scale="50"
      xChannelSelector="R"
      yChannelSelector="G"></feDisplacementMap>
  </filter>
</svg>
